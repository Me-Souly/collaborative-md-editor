# =============================================================
# КОНФИГУРАЦИЯ ПРИЛОЖЕНИЯ - NOTE EDITOR
# =============================================================
# Скопируйте этот файл в .env и заполните значения:
#   cp .env.example .env
#
# ⚠️  НИКОГДА не коммитьте .env в git — он содержит секреты!
# =============================================================

NODE_ENV=production
PORT=5000
CLIENT_PORT=3000

# =============================================================
# БАЗА ДАННЫХ - MongoDB
# =============================================================

MONGO_ROOT_USERNAME=admin

# Генерация надёжного пароля:
#   Linux/Mac:   openssl rand -base64 24
#   PowerShell:  -join ((65..90)+(97..122)+(48..57) | Get-Random -Count 24 | % {[char]$_})
MONGO_ROOT_PASSWORD=

MONGO_DATABASE=note_editor_db

# URL подключения — задаётся автоматически из MONGO_* переменных,
# или укажите вручную:
# DB_URL=mongodb://admin:password@mongodb:27017/note_editor_db?authSource=admin
DB_URL=

# =============================================================
# КЭШ - Redis
# =============================================================
# Оставьте пустым, чтобы отключить Redis (приложение работает без него,
# но медленнее — без кэширования Yjs-состояний)

# Генерация: openssl rand -base64 24
REDIS_PASSWORD=

# URL подключения — задаётся автоматически, или укажите вручную:
# REDIS_URL=redis://:password@redis:6379
REDIS_URL=

# =============================================================
# JWT СЕКРЕТЫ — МИНИМУМ 32 СЛУЧАЙНЫХ СИМВОЛА
# =============================================================
# ⚠️  КРИТИЧНО: Никогда не используйте короткие или предсказуемые значения!
# При компрометации секрета все сессии пользователей станут недействительными.
#
# Способы генерации:
#   Linux/Mac:   openssl rand -base64 32
#   Node.js:     node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#   PowerShell:  [Convert]::ToBase64String([System.Security.Cryptography.RandomNumberGenerator]::GetBytes(32))
#
JWT_ACCESS_SECRET=
JWT_REFRESH_SECRET=

# Время жизни токенов
JWT_ACCESS_EXPIRES=15m
JWT_REFRESH_EXPIRES=7d
JWT_REFRESH_EXPIRES_DAYS=7
RESET_TOKEN_EXPIRES_MINUTES=15
ACTIVATION_TOKEN_EXPIRES_DAYS=7

# =============================================================
# URL-АДРЕСА И CORS WHITELIST
# =============================================================
# CLIENT_URL — список разрешённых origins для CORS (через запятую)
# В production укажите только ваш домен:
#   CLIENT_URL=https://yourdomain.com
# Несколько доменов (например, www и без www):
#   CLIENT_URL=https://yourdomain.com,https://www.yourdomain.com
CLIENT_URL=http://localhost:3000

API_URL=http://localhost:5000

# WebSocket URL (тот же хост, что и API, но ws:// или wss://)
# В production: REACT_APP_WS_URL=wss://yourdomain.com
REACT_APP_WS_URL=ws://localhost:5000

# =============================================================
# EMAIL (SMTP) — нужен для активации аккаунта и сброса пароля
# =============================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
# Для Gmail используйте App Password (не основной пароль аккаунта):
# https://myaccount.google.com/apppasswords

# =============================================================
# АККАУНТ МОДЕРАТОРА — создаётся при первом запуске
# =============================================================
MODERATOR_EMAIL=
MODERATOR_LOGIN=moderator

# Генерация: openssl rand -base64 16
MODERATOR_PASSWORD=

# =============================================================
# МОНИТОРИНГ - Sentry (рекомендуется для production)
# =============================================================
# Получите DSN на https://sentry.io (бесплатный план доступен)
# После регистрации: Settings → Projects → [ваш проект] → Client Keys (DSN)

# Для серверной части (Node.js):
SENTRY_DSN=

# Для клиентской части (React) — встраивается в сборку:
REACT_APP_SENTRY_DSN=
REACT_APP_SENTRY_ENVIRONMENT=production
